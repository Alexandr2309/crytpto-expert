/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/main.js":
/*!************************!*\
  !*** ./src/js/main.js ***!
  \************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _order_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./order.js */ \"./src/js/order.js\");\n/* harmony import */ var _modal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modal.js */ \"./src/js/modal.js\");\n\r\n\r\n\r\nconst footerAnchor = document.querySelector(\".anchor\");\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", (e) => {\r\n  document.body.insertAdjacentHTML(\r\n    \"beforeend\",\r\n    `<div class=\"loader__wrapper\">\r\n<div class=\"lds-roller\">\r\n    <div></div>\r\n    <div></div>\r\n    <div></div>\r\n    <div></div>\r\n    <div></div>\r\n    <div></div>\r\n    <div></div>\r\n    <div></div>\r\n</div>\r\n</div>\r\n`\r\n  );\r\n  window.loaderElement = document.querySelector(\".loader__wrapper\");\r\n});\r\n\r\nfooterAnchor.onclick = () => {\r\n  window.scrollTo({\r\n    top: 0,\r\n    behavior: \"smooth\"\r\n  });\r\n};\r\n\r\nfunction activeLinkSet(pathname) {\r\n  [...document.querySelectorAll(\".nav__link\")].forEach(\r\n    link => link.classList.remove(\"nav__link--active\")\r\n  );\r\n  \r\n  let name;\r\n  \r\n  if (/\\/(?!\\w+)|crypto-expert/gi.test(pathname)) name = \"main\";\r\n  else if (pathname.includes(\"Form.html\")) name = \"form\";\r\n  else if (pathname.includes(\"Services.html\")) name = \"services\";\r\n  else if (pathname.includes(\"About.html\")) name = \"about\";\r\n  \r\n  document.querySelector(`[data-name=\"${name}\"]`)\r\n    .classList.add(\"nav__link--active\");\r\n}\r\n\r\nactiveLinkSet(window.location.pathname);\r\n\r\nconst header = document.querySelector(\"header\");\r\nconsole.log(header);\r\ndocument.documentElement.style.setProperty(\r\n  \"--header-height\",\r\n  `${header.clientHeight}px`\r\n);\r\n\r\nconst burger = header.querySelector(\".header__burger\");\r\nconst nav = header.querySelector(\".nav\");\r\nburger.addEventListener(\"click\", () => {\r\n  nav.classList.toggle(\"header__nav--show\");\r\n  burger.classList.toggle(\"header__burger--white\");\r\n});\r\n\r\n/*ОБРАБОТКА ДЕЙСТВИЙ В ФОРМЕ*/\r\n\r\n\r\n\n\n//# sourceURL=webpack://tttee/./src/js/main.js?");

/***/ }),

/***/ "./src/js/modal.js":
/*!*************************!*\
  !*** ./src/js/modal.js ***!
  \*************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"appendModal\": () => (/* binding */ appendModal),\n/* harmony export */   \"modalContentHTML\": () => (/* binding */ modalContentHTML)\n/* harmony export */ });\nconst modalContentHTML = `\r\n<div class=\"modal modal--active\">\r\n    <div class=\"modal__wrapper\">\r\n        <div class=\"modal__content\">\r\n            <img class=\"modal__close\"\r\n                 src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/%D0%98%D0%BA%D0%BE%D0%BD%D0%BA%D0%B0_%D0%BA%D1%80%D0%B5%D1%81%D1%82%D0%B8%D0%BA%D0%B0_%28ei%29.svg/800px-%D0%98%D0%BA%D0%BE%D0%BD%D0%BA%D0%B0_%D0%BA%D1%80%D0%B5%D1%81%D1%82%D0%B8%D0%BA%D0%B0_%28ei%29.svg.png?20141227230235\"\r\n                 alt=\"крестик\">\r\n          content_main\r\n        </div>\r\n    </div>\r\n</div>`;\r\n\r\nconst appendModal = (content) => {\r\n  let modalWithContent = modalContentHTML\r\n    .replace('content_main', content);\r\n\r\n  document.body.insertAdjacentHTML('beforeend', modalWithContent);\r\n  const modal = document.querySelector('.modal');\r\n  const loginClose = document.querySelector('.modal__close');\r\n\r\n  function loginCloseHandler() {\r\n    modal.classList.remove('modal--active');\r\n  }\r\n\r\n  loginClose.addEventListener('click', loginCloseHandler)\r\n}\r\nwindow.addEventListener('DOMContentLoaded', (e) => {\r\n  window.addEventListener('keydown', (e) => {\r\n    if (e.key === 'Escape') {\r\n      document.querySelector('.modal').classList.remove('modal--active')\r\n    }\r\n  });\r\n})\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://tttee/./src/js/modal.js?");

/***/ }),

/***/ "./src/js/order.js":
/*!*************************!*\
  !*** ./src/js/order.js ***!
  \*************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modal_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modal.js */ \"./src/js/modal.js\");\n\r\n\r\nconst NAME_LOCALSTORAGE_KEY = \"user_name\",\r\n  EMAIL_LOCALSTORAGE_KEY = \"user_email\",\r\n  PHONE_LOCALSTORAGE_KEY = \"user_phone\";\r\nconst EMAIL_REGEXP = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/iu;\r\n\r\n\r\nconst onSuccessModalContent = `\r\n<div class=\"success\">\r\n    <h2 class=\"success__title\">Данные успешно сохранены в LocalStorage</h2>\r\n    <div class=\"success__picture\">\r\n    <img src=\"img/success.gif\" alt=\"успешно\" class=\"success__img\">\r\n</div>\r\n</div>\r\n`\r\n\r\nfunction getCoords(elem) {\r\n  let box = elem.getBoundingClientRect();\r\n\r\n  return {\r\n    top: box.top + window.pageYOffset,\r\n    right: box.right + window.pageXOffset,\r\n    bottom: box.bottom + window.pageYOffset,\r\n    left: box.left + window.pageXOffset,\r\n  };\r\n}\r\n\r\nfunction createTooltip(input, text) {\r\n  const tooltip = document.createElement(\"div\");\r\n  tooltip.classList.add(\"tooltip\");\r\n  const {top, left} = getCoords(input.target || input);\r\n  tooltip.innerHTML = text || \"Допустимый формат: +7(***) и 7 цифр\";\r\n\r\n  tooltip.style.left = left + \"px\";\r\n  tooltip.style.top = top + \"px\";\r\n  document.body.append(tooltip);\r\n}\r\n\r\nif (window.location.pathname.includes(\"Form.html\")) {\r\n  const form = document.forms[\"order-call\"];\r\n  const [name, email, tel, comment, policy, send] = form;\r\n\r\n  const onBlurCheckFormat = (e) => {\r\n    let value = e.target?.value || e.value;\r\n    const phoneNumber =\r\n      value?.length > 1\r\n        ? `+7${value.slice(2).replace(/\\D/g, \"\")}`\r\n        : `+7${value?.replace(/\\D/g, \"\")}`;\r\n\r\n    if (!/^(\\+7)(\\d{3})(\\d{3})(\\d{2})(\\d{2})$/.test(phoneNumber)) {\r\n      tel.classList.add(\"error\");\r\n      return createTooltip(e);\r\n    }\r\n\r\n    document.querySelector(\".tooltip\")?.remove();\r\n    tel.classList.remove(\"error\");\r\n    return true;\r\n  };\r\n\r\n  // helper для сохранения позиции курсора\r\n  function saveCursorPos(phoneNumberLength) {\r\n    if (phoneNumberLength >= 2 && phoneNumberLength < 5) {\r\n      setTimeout(() => {\r\n        tel.selectionEnd = phoneNumberLength + 3;\r\n      }, 0);\r\n    } else if (phoneNumberLength > 5) {\r\n      let selectNow = tel.selectionStart;\r\n      setTimeout(() => {\r\n        tel.selectionEnd = selectNow;\r\n      }, 0);\r\n    } else if (phoneNumberLength === 5) {\r\n      setTimeout(() => {\r\n        tel.selectionEnd = 10;\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  // Маска для инпута, форматирование номера телефона\r\n  function formatPhoneNumber(value) {\r\n    const phoneNumber =\r\n      value.length > 1\r\n        ? `7${value.slice(2).replace(/\\D/g, \"\")}`\r\n        : `7${value.replace(/\\D/g, \"\")}`;\r\n    const phoneNumberLength = phoneNumber.length;\r\n\r\n    if (!phoneNumber.slice(1)) {\r\n      tel.setSelectionEnd = 0;\r\n      return \"\";\r\n    }\r\n\r\n    saveCursorPos(phoneNumberLength);\r\n\r\n    if (phoneNumberLength < 5) {\r\n      let currentNums = phoneNumber.slice(1, 4);\r\n      return `+${phoneNumber.slice(0, 1)} (${currentNums}${\"_\".repeat(\r\n        3 - currentNums.length\r\n      )}) _______`;\r\n    }\r\n    let lastNums = phoneNumber.slice(4, 11);\r\n    return `+${phoneNumber.slice(0, 1)} (${phoneNumber.slice(\r\n      1,\r\n      4\r\n    )}) ${lastNums}${\"_\".repeat(7 - lastNums.length)}`;\r\n  }\r\n\r\n  const onChangeTelHandler = (e) => {\r\n    const formattedPhoneNumber = formatPhoneNumber(e.target.value);\r\n    tel.value = formattedPhoneNumber;\r\n  };\r\n\r\n  function checkName() {\r\n    if (!name.value || /\\d/g.test(name.value)) {\r\n      createTooltip(name, 'Укажите настоящее имя')\r\n      name.classList.add('error');\r\n      return false\r\n    }\r\n    name.classList.remove('error');\r\n    document.querySelector(\".tooltip\")?.remove();\r\n    return true;\r\n  }\r\n\r\n  function checkEmail() {\r\n    if (!EMAIL_REGEXP.test(email.value)) {\r\n      createTooltip(email, 'Неверный формат email')\r\n      email.classList.add('error');\r\n      return false;\r\n    }\r\n\r\n    email.classList.remove('error');\r\n    document.querySelector(\".tooltip\")?.remove();\r\n    return true;\r\n  }\r\n\r\n  policy.addEventListener('change', () => {\r\n    send.disabled = policy.checked ? false : true;\r\n  })\r\n\r\n  const onSubmitHandler = async (e) => {\r\n    e.preventDefault();\r\n    window.loaderElement.classList.add('is-loading');\r\n    try {\r\n      /*ВАЛИДАЦИЯ ПОЛЕЙ*/\r\n      if (\r\n        !checkName() ||\r\n        !checkEmail() ||\r\n        !onBlurCheckFormat(tel)\r\n      ) return;\r\n\r\n      await new Promise((resolve, reject) => {\r\n        window.localStorage.setItem(PHONE_LOCALSTORAGE_KEY, tel.value.replace(/\\D/g, ''));\r\n        window.localStorage.setItem(EMAIL_LOCALSTORAGE_KEY, email.value.trim());\r\n        window.localStorage.setItem(NAME_LOCALSTORAGE_KEY, name.value.trim());\r\n        setTimeout(() => {\r\n          resolve('Ваши данные успешно сохранены в LocalStorage')\r\n        }, 800);\r\n      }).then(res => {\r\n        (0,_modal_js__WEBPACK_IMPORTED_MODULE_0__.appendModal)(onSuccessModalContent);\r\n      })\r\n    } catch (e) {\r\n      throw new Error(e);\r\n    } finally {\r\n      window.loaderElement.classList.remove('is-loading');\r\n      tel.value = ''\r\n      name.value = ''\r\n      email.value = ''\r\n    }\r\n\r\n  }\r\n\r\n  tel.addEventListener('input', onChangeTelHandler);\r\n  tel.addEventListener('blur', onBlurCheckFormat);\r\n  name.addEventListener('blur', checkName);\r\n  email.addEventListener('blur', checkEmail);\r\n  send.addEventListener('click', onSubmitHandler);\r\n\r\n}\r\n\n\n//# sourceURL=webpack://tttee/./src/js/order.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/main.js");
/******/ 	
/******/ })()
;