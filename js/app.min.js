(()=>{"use strict";window.addEventListener("DOMContentLoaded",(e=>{window.addEventListener("keydown",(e=>{"Escape"===e.key&&document.querySelector(".modal").classList.remove("modal--active")}))}));const e=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;function t(e,t){const n=document.createElement("div");n.classList.add("tooltip");const{top:o,left:i}=function(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset,left:t.left+window.pageXOffset}}(e.target||e);n.innerHTML=t||"Допустимый формат: +7(***) и 7 цифр",n.style.left=i+"px",n.style.top=o+"px",document.body.append(n)}if(window.location.pathname.includes("Form.html")){const l=document.forms["order-call"],[r,c,d,a,u,m]=l,v=e=>{let n=e.target?.value||e.value;const o=n?.length>1?`+7${n.slice(2).replace(/\D/g,"")}`:`+7${n?.replace(/\D/g,"")}`;return/^(\+7)(\d{3})(\d{3})(\d{2})(\d{2})$/.test(o)?(document.querySelector(".tooltip")?.remove(),d.classList.remove("error"),!0):(d.classList.add("error"),t(e))};function _(e){if(e>=2&&e<5)setTimeout((()=>{d.selectionEnd=e+3}),0);else if(e>5){let e=d.selectionStart;setTimeout((()=>{d.selectionEnd=e}),0)}else 5===e&&setTimeout((()=>{d.selectionEnd=10}),0)}function g(e){const t=e.length>1?`7${e.slice(2).replace(/\D/g,"")}`:`7${e.replace(/\D/g,"")}`,n=t.length;if(!t.slice(1))return d.setSelectionEnd=0,"";if(_(n),n<5){let e=t.slice(1,4);return`+${t.slice(0,1)} (${e}${"_".repeat(3-e.length)}) _______`}let o=t.slice(4,11);return`+${t.slice(0,1)} (${t.slice(1,4)}) ${o}${"_".repeat(7-o.length)}`}const p=e=>{const t=g(e.target.value);d.value=t};function w(){return!r.value||/\d/g.test(r.value)?(t(r,"Укажите настоящее имя"),r.classList.add("error"),!1):(r.classList.remove("error"),document.querySelector(".tooltip")?.remove(),!0)}function h(){return e.test(c.value)?(c.classList.remove("error"),document.querySelector(".tooltip")?.remove(),!0):(t(c,"Неверный формат email"),c.classList.add("error"),!1)}u.addEventListener("change",(()=>{m.disabled=!u.checked}));const D=async e=>{e.preventDefault(),window.loaderElement.classList.add("is-loading");try{if(!w()||!h()||!v(d))return;await new Promise(((e,t)=>{window.localStorage.setItem("user_phone",d.value.replace(/\D/g,"")),window.localStorage.setItem("user_email",c.value.trim()),window.localStorage.setItem("user_name",r.value.trim()),setTimeout((()=>{e("Ваши данные успешно сохранены в LocalStorage")}),800)})).then((e=>{(e=>{let t='\n<div class="modal modal--active">\n    <div class="modal__wrapper">\n        <div class="modal__content">\n            <img class="modal__close"\n                 src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/%D0%98%D0%BA%D0%BE%D0%BD%D0%BA%D0%B0_%D0%BA%D1%80%D0%B5%D1%81%D1%82%D0%B8%D0%BA%D0%B0_%28ei%29.svg/800px-%D0%98%D0%BA%D0%BE%D0%BD%D0%BA%D0%B0_%D0%BA%D1%80%D0%B5%D1%81%D1%82%D0%B8%D0%BA%D0%B0_%28ei%29.svg.png?20141227230235"\n                 alt="крестик">\n          content_main\n        </div>\n    </div>\n</div>'.replace("content_main",'\n<div class="success">\n    <h2 class="success__title">Данные успешно сохранены в LocalStorage</h2>\n    <div class="success__picture">\n    <img src="img/success.gif" alt="успешно" class="success__img">\n</div>\n</div>\n');document.body.insertAdjacentHTML("beforeend",t);const n=document.querySelector(".modal");document.querySelector(".modal__close").addEventListener("click",(function(){n.classList.remove("modal--active")}))})()}))}catch(e){throw new Error(e)}finally{window.loaderElement.classList.remove("is-loading"),d.value="",r.value="",c.value=""}};d.addEventListener("input",p),d.addEventListener("blur",v),r.addEventListener("blur",w),c.addEventListener("blur",h),m.addEventListener("click",D)}const n=document.querySelector(".anchor");window.addEventListener("DOMContentLoaded",(e=>{document.body.insertAdjacentHTML("beforeend",'<div class="loader__wrapper">\n<div class="lds-roller">\n    <div></div>\n    <div></div> \n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n</div>\n</div>\n'),window.loaderElement=document.querySelector(".loader__wrapper")})),n.onclick=()=>{window.scrollTo({top:0,behavior:"smooth"})},function(e){let t;[...document.querySelectorAll(".nav__link")].forEach((e=>e.classList.remove("nav__link--active"))),e.includes("index.html")?t="main":e.includes("Form.html")?t="form":e.includes("Services.html")?t="services":e.includes("About.html")&&(t="about"),document.querySelector(`[data-name="${t}"]`).classList.add("nav__link--active")}(window.location.pathname);const o=document.querySelector("header");document.documentElement.style.setProperty("--header-height",`${o.clientHeight}px`);const i=o.querySelector(".header__burger"),s=o.querySelector(".nav");i.addEventListener("click",(()=>{s.classList.toggle("header__nav--show"),i.classList.toggle("header__burger--white")}))})();